# Project Configuration
project_id = "your-project-id"

# Network Configuration
network_name = "your-existing-network"

# Region Configuration
regions = {
  "us-central1" = {
    subnet_name = "your-existing-subnet"
    zones       = ["us-central1-a", "us-central1-b", "us-central1-c"]
  }
  # Add more regions as needed:
  # "europe-west1" = {
  #   subnet_name = "your-europe-subnet"
  #   zones       = ["europe-west1-b", "europe-west1-c", "europe-west1-d"]
  # }
}

# Node Naming
mgmt_node_name = "pexip-mgmt"
transcoding_node_name = "pexip-transcoding"
proxy_node_name = "pexip-proxy"

# Pexip Image Configuration
pexip_version = "30.1"  # Replace with your Pexip version

pexip_images = {
  management = {
    source_file = "/path/to/pexip-infinity-30-1-mgmt.tar.gz"  # Replace with your management node image path
    name        = null  # Optional: Set to override default image name
  }
  conferencing = {
    source_file = "/path/to/pexip-infinity-30-1-conf.tar.gz"  # Replace with your conferencing node image path
    name        = null  # Optional: Set to override default image name
  }
}

# Management Node Configuration
mgmt_node = {
  zone         = "us-central1-a"
  region       = "us-central1"
  hostname     = "mgmt"
  domain       = "example.com"
  admin_username = "admin"
  admin_password_hash = "pbkdf2_sha256$..."  # Replace with actual hash
  os_password_hash   = "sha512$..."          # Replace with actual hash
  public_ip    = true
  static_ip    = true
  allowed_cidrs = {
    admin_ui = ["10.0.0.0/8"]  # Restrict admin UI access
    ssh      = ["10.0.0.0/8"]  # Restrict SSH access
  }
  service_cidrs = {
    directory = ["10.0.0.0/8"]
    smtp      = ["10.0.0.0/8"]
    syslog    = ["10.0.0.0/8"]
  }
}

# Transcoding Node Pools Configuration
transcoding_node_pools = {
  "pool1" = {
    machine_type = "e2-standard-8"
    disk_size    = 50
    disk_type    = "pd-standard"
    region       = "us-central1"
    count_per_zone = 2
    public_ip    = true
    static_ip    = true
  }
  # Example of another pool with different machine type in different region
  # "pool2" = {
  #   machine_type = "e2-standard-16"
  #   disk_size    = 50
  #   disk_type    = "pd-standard"
  #   region       = "europe-west1"
  #   count_per_zone = 2
  #   public_ip    = true
  #   static_ip    = true
  # }
}

# Proxy Node Pools Configuration
proxy_node_pools = {
  "pool1" = {
    region       = "us-central1"
    count_per_zone = 1
    public_ip    = true
    static_ip    = true
  }
  # Example of another proxy pool in different region
  # "pool2" = {
  #   region       = "europe-west1"
  #   count_per_zone = 1
  #   public_ip    = true
  #   static_ip    = true
  # }
}

# Service Configuration
mgmt_services = {
  enable_services = {
    admin_ui     = true
    directory    = true
    smtp         = true
    syslog       = true
  }
  ports = {
    admin_ui = {
      tcp = ["443"]
    }
    directory = {
      tcp = ["389", "636"]
    }
    smtp = {
      tcp = ["25", "587"]
    }
    syslog = {
      tcp = ["514"]
      udp = ["514"]
    }
  }
}

transcoding_services = {
  enable_protocols = {
    sip    = true
    h323   = true
    webrtc = true
    teams  = true
    gmeet  = true
  }
  enable_services = {
    one_touch_join = false
    event_sink     = false
    epic           = false
    captions       = false
  }
  ports = {
    media = {
      udp_range = {
        start = 40000
        end   = 49999
      }
    }
    signaling = {
      sip_tcp = ["5060", "5061"]
      sip_udp = ["5060"]
      h323_tcp = ["1720"]
      h323_udp = ["1719"]
      webrtc = ["443"]
    }
    services = {
      one_touch_join = ["443"]
      event_sink = ["443"]
    }
  }
}

proxy_services = {
  enable_protocols = {
    sip    = true
    h323   = true
    webrtc = true
    teams  = true
    gmeet  = true
  }
  ports = {
    media = {
      udp_range = {
        start = 50000
        end   = 54999
      }
    }
    signaling = {
      sip_tcp = ["5060", "5061"]
      sip_udp = ["5060"]
      h323_tcp = ["1720"]
      h323_udp = ["1719"]
      webrtc = ["443"]
    }
  }
}

# System Configuration
dns_servers = ["8.8.8.8", "8.8.4.4"]
ntp_servers = ["time.google.com"]
